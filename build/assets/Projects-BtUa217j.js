import{a as h,r as b,j as t,U as j}from"./app-BCMED1Pz.js";import{F as y}from"./index-WkoiIBi0.js";import"./iconBase-C9k-vOIf.js";function w({projects:d}){const{data:l,setData:a,post:n,put:m,delete:u}=h({id:null,title:"",description:"",technologies:[],image_url:"",source:"",project_url:"",tags:[]}),[r,o]=b.useState(!1),g=e=>{a({id:e.id,title:e.title,description:e.description,technologies:Array.isArray(e.technologies)?e.technologies:e.technologies?e.technologies.split(",").map(s=>s.trim()):[],image_url:e.image_url||"",source:e.source||"",project_url:e.project_url||"",tags:Array.isArray(e.tags)?e.tags:e.tags?e.tags.split(",").map(s=>s.trim()):[]}),o(!0)},x=e=>{confirm("Are you sure you want to delete this project?")&&u(route("projects.destroy",e),{onSuccess:()=>alert("Project deleted successfully!")})},p=e=>{e.preventDefault(),r?m(route("projects.update",l.id),{onSuccess:()=>{alert("Project updated successfully!"),o(!1),a({id:null,title:"",description:"",technologies:[],image_url:"",source:"",project_url:"",tags:[]})}}):(console.log(l),n(route("projects.store"),{onSuccess:()=>{alert("Project added successfully!"),a({id:null,title:"",description:"",technologies:[],image_url:"",source:"",project_url:"",tags:[]})}}))};return t.jsx("div",{className:"min-h-screen bg-gray-100 px-5 py-8",children:t.jsxs("div",{className:"mx-auto max-w-6xl rounded-md bg-white p-8 shadow-md",children:[t.jsx(j,{href:"/dashboard",className:"mb-6 inline-block text-blue-600 hover:underline",children:"Go back to dashboard"}),t.jsx("h1",{className:"mb-6 text-3xl font-bold text-gray-800",children:"Manage Projects"}),t.jsx("div",{className:"mb-6 flex flex-wrap gap-4",children:d.length>0?d.map(e=>t.jsxs("div",{className:"relative flex cursor-pointer flex-col items-center rounded-md border bg-gray-100 p-6 shadow-sm transition-all hover:scale-105",onClick:()=>g(e),children:[t.jsx(y,{className:"text-gray-500",size:50}),t.jsx("p",{className:"mt-2 text-lg font-semibold text-gray-800",children:e.title}),t.jsxs("p",{className:"mt-1 text-center text-sm text-gray-600",children:[e.description.slice(0,50),"..."]}),t.jsx("button",{className:"absolute right-0 top-0 rounded bg-red-500 px-2 py-1 text-xs text-white hover:bg-red-600",onClick:s=>{s.stopPropagation(),x(e.id)},children:"Delete"})]},e.id)):t.jsx("p",{className:"text-gray-500",children:"No projects available. Add a new project to get started."})}),t.jsxs("div",{className:"mt-10 rounded-md bg-gray-50 p-6 shadow-sm",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:r?"Edit Project":"Add New Project"}),t.jsxs("form",{className:"mt-4",onSubmit:p,children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Project Title"}),t.jsx("input",{type:"text",value:l.title,onChange:e=>a("title",e.target.value),className:"mt-1 w-full rounded-md border border-gray-300 p-2",required:!0})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),t.jsx("textarea",{value:l.description,onChange:e=>a("description",e.target.value),className:"mt-1 w-full rounded-md border border-gray-300 p-2",rows:4,required:!0})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Technologies (Comma-separated)"}),t.jsx("input",{type:"text",value:l.technologies.join(", "),onChange:e=>a("technologies",e.target.value.split(",").map(s=>s.trim())),className:"mt-1 w-full rounded-md border border-gray-300 p-2"})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Upload Image"}),t.jsx("input",{type:"file",accept:"image/*",onChange:e=>{const s=e.target.files[0];if(s){const c=new FormData;c.append("image",s),axios.post(route("projects.uploadImage"),c,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>{a("image_url",i.data.path),alert("Image uploaded successfully!")}).catch(i=>{console.error(i),alert("Failed to upload image")})}},className:"mt-1 w-full rounded-md border border-gray-300 p-2"})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Source Code URL"}),t.jsx("input",{type:"url",value:l.source,onChange:e=>a("source",e.target.value),className:"mt-1 w-full rounded-md border border-gray-300 p-2"})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Live Project URL"}),t.jsx("input",{type:"url",value:l.project_url,onChange:e=>a("project_url",e.target.value),className:"mt-1 w-full rounded-md border border-gray-300 p-2"})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tags (Comma-separated)"}),t.jsx("input",{type:"text",value:l.tags.join(", "),onChange:e=>a("tags",e.target.value.split(",").map(s=>s.trim())),className:"mt-1 w-full rounded-md border border-gray-300 p-2"})]}),t.jsx("button",{type:"submit",className:"rounded bg-blue-500 px-4 py-2 text-white hover:bg-blue-600",children:r?"Update Project":"Add Project"}),r&&t.jsx("button",{type:"button",className:"ml-4 rounded bg-gray-500 px-4 py-2 text-white hover:bg-gray-600",onClick:()=>{o(!1),a({id:null,title:"",description:"",technologies:[],image_url:"",source:"",project_url:"",tags:[]})},children:"Cancel"})]})]})]})})}export{w as default};
